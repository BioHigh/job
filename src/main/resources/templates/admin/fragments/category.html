<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
   <meta charset="UTF-8">
   <title>Manage Categories - JobPortal</title>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

   <style>
      body {
         display: flex;
         min-height: 100vh;
      }
      .sidebar {
         width: 220px;
         background: #343a40;
         color: #fff;
         padding: 20px;
      }
      .sidebar a {
         display: block;
         color: #ddd;
         padding: 10px;
         text-decoration: none;
         border-radius: 4px;
      }
      .sidebar a:hover {
         background: #495057;
         color: #fff;
      }
      .main-content {
         flex: 1;
         padding: 20px;
         background: #f8f9fa;
      }
   </style>
</head>
<body>
   <!-- Sidebar -->
   <div class="sidebar">
      
   </div>

   <!-- Main Content -->
   <div class="main-content">
      <h3 id="category-section">Manage Categories</h3>

      <!-- Success/Error message -->
      <div th:if="${msg}" class="alert alert-success" th:text="${msg}"></div>

      <!-- Form -->
      <form th:action="@{/admin/category/save}" method="post" class="mb-3">
         <input type="hidden" name="id" th:value="${category != null ? category.id : 0}">
         <div class="row g-2">
            <div class="col-md-6">
               <input type="text" class="form-control"
                      name="catName" th:value="${category != null ? category.catName : ''}"
                      placeholder="Enter Category" required>
            </div>
            <div class="col-md-3">
               <button type="submit" class="btn btn-primary w-100">
                  <i class="fa fa-save"></i> Save
               </button>
            </div>
         </div>
      </form>

      <!-- Category Table -->
      <div class="table-responsive">
         <table class="table table-bordered table-hover">
            <thead class="table-dark">
               <tr>
                  <th style="width: 60px;">ID</th>
                  <th>Category Name</th>
                  <th style="width: 150px;">Action</th>
               </tr>
            </thead>
            <tbody>
               <tr th:each="cat : ${categories}">
                  <td th:text="${cat.id}"></td>
                  <td th:text="${cat.catName}"></td>
                  <td>
                     <a th:href="@{'/admin/category/edit/' + ${cat.id}} + '#category-section'" 
                        class="btn btn-sm btn-warning">
                        <i class="fa fa-edit"></i> Edit
                     </a>
                     <a th:href="@{'/admin/category/delete/' + ${cat.id}} + '#category-section'" 
                        class="btn btn-sm btn-danger"
                        onclick="return confirm('Are you sure you want to delete this category?')">
                        <i class="fa fa-trash"></i> Delete
                     </a>
                  </td>
               </tr>
            </tbody>
         </table>
      </div>
   </div>
</body>
</html>
