<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Companies - JobJump</title>

  <!-- Bootstrap & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
      <link rel="stylesheet" th:href="@{/css/footer.css}">

  <!-- Custom CSS -->

  <style>
.company-card {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  border: none;
  border-radius: 15px;
  overflow: hidden;
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.15); /* ðŸ‘ˆ clearly visible soft shadow */
}

.company-card:hover {
  transform: translateY(-7px);
  box-shadow: 0 14px 35px rgba(0, 0, 0, 0.25); /* ðŸ‘ˆ stronger hover shadow */
}


    .company-logo {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 50%;
      border: 3px solid #89ba16;
    }
    .stats-badge {
      background: linear-gradient(45deg, #89ba16, #6ea012);
      color: white;
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 0.8rem;
    }
    .search-box {
      border-radius: 25px;
      border: 2px solid #e9ecef;
      padding: 15px 25px;
    }
    .search-box:focus {
      border-color: #89ba16;
      box-shadow: 0 0 0 0.2rem rgba(137, 186, 22, 0.25);
    }
    
    
  </style>
</head>

<body>
  <!-- Header -->
  <div th:replace="header :: site-header"></div>

  <!-- Main Content -->
  <div class="container-fluid" style="margin-top: 80px;">
    <div class="row justify-content-center">
      <div class="col-12 col-lg-10">

        <!-- Page Header -->
        <div class="text-center mb-5">
          <h1 class="display-4 fw-bold text-dark mb-3">Discover Top Companies</h1>
          <p class="lead text-muted">
            Explore leading companies hiring on JobJump and find your perfect workplace
          </p>
        </div>

        <!-- Search Bar -->
        <div class="row justify-content-center mb-5">
          <div class="col-12 col-md-8 col-lg-6">
            <div class="input-group">
              <input type="text" class="form-control search-box" placeholder="Search companies by name, industry, or location...">
              <button class="btn text-white" style="background-color: #89ba16; border-radius: 0 25px 25px 0;">
                <i class="bi bi-search"></i>
              </button>
            </div>
          </div>
        </div>

        <!-- Companies Grid -->
        <div class="row g-4" id="companiesGrid">
          <div th:each="companyMap : ${companiesWithPhotos}" class="col-12 col-sm-6 col-lg-4">
            <div class="card company-card h-100 shadow-sm">
              <div class="card-body text-center p-4">
                
                <!-- Company Logo -->
                <div class="mb-3">
                  <th:block th:if="${companyMap.profilePhotoBase64 != null}">
                    <img th:src="'data:image/jpeg;base64,' + ${companyMap.profilePhotoBase64}"
                         class="company-logo"
                         th:alt="${companyMap.company.companyName} + ' logo'">
                  </th:block>
                  <th:block th:unless="${companyMap.profilePhotoBase64 != null}">
                    <div class="company-logo bg-light d-flex align-items-center justify-content-center mx-auto">
                      <i class="bi bi-building text-muted" style="font-size: 2rem;"></i>
                    </div>
                  </th:block>
                </div>

                <!-- Company Name -->
                <h5 class="card-title fw-bold text-dark mb-2" th:text="${companyMap.company.companyName}"></h5>

                <!-- Description -->
                <p class="card-text text-muted small mb-3"
                   th:text="${companyMap.company.description != null ? (#strings.length(companyMap.company.description) > 100 ? #strings.substring(companyMap.company.description, 0, 100) + '...' : companyMap.company.description) : 'No description available'}">
                </p>

                <!-- Details -->
                <div class="company-details mb-3">
                  <div th:if="${companyMap.company.address}" class="mb-2">
                    <i class="bi bi-geo-alt text-muted me-2"></i>
                    <small class="text-muted" th:text="${companyMap.company.address}"></small>
                  </div>
                  <div th:if="${companyMap.company.companyPhone}" class="mb-2">
                    <i class="bi bi-telephone text-muted me-2"></i>
                    <small class="text-muted" th:text="${companyMap.company.companyPhone}"></small>
                  </div>
                  <div th:if="${companyMap.company.gmail}">
                    <i class="bi bi-envelope text-muted me-2"></i>
                    <small class="text-muted" th:text="${companyMap.company.gmail}"></small>
                  </div>
                </div>

                <!-- Status Badge -->
                <div class="mb-3">
                  <span class="stats-badge">
                    <i class="bi bi-check-circle me-1"></i>
                    <span th:text="${companyMap.company.status == 'active' ? 'Active' : 'Inactive'}"></span>
                  </span>
                </div>

                <!-- View Company Button (uncomment when needed) -->
                <!--
                <a th:href="@{/owner/company/{id}(id=${companyMap.company.id})}"
                   class="btn btn-outline-primary btn-sm w-100">
                  <i class="bi bi-eye me-1"></i> View Jobs
                </a>
                -->
              </div>
            </div>
          </div>
        </div>

        <!-- No Companies Message -->
        <div th:if="${#lists.isEmpty(companiesWithPhotos)}" class="text-center py-5">
          <i class="bi bi-building display-1 text-muted mb-3"></i>
          <h3 class="text-muted">No Companies Found</h3>
          <p class="text-muted">There are currently no companies registered on the platform.</p>
        </div>

      </div>
    </div>
  </div>

  <!-- Footer -->
  <div th:replace="footer :: site-footer"></div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Simple search functionality
    document.addEventListener('DOMContentLoaded', function() {
      const searchInput = document.querySelector('.search-box');
      const companyCards = document.querySelectorAll('.company-card');

      searchInput.addEventListener('input', function(e) {
        const searchTerm = e.target.value.toLowerCase();

        companyCards.forEach(card => {
          const companyName = card.querySelector('.card-title').textContent.toLowerCase();
          const companyDesc = card.querySelector('.card-text').textContent.toLowerCase();
          const companyLocation = card.querySelector('.company-details')?.textContent.toLowerCase() || '';

          card.parentElement.style.display =
            (companyName.includes(searchTerm) ||
             companyDesc.includes(searchTerm) ||
             companyLocation.includes(searchTerm))
              ? 'block'
              : 'none';
        });
      });
    });
  </script>
</body>
</html>
