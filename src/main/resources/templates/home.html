<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>JobJump</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="shortcut icon" th:href="@{/ftco-32x32.png}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">

    <link rel="stylesheet" th:href="@{/css/custom-bs.css}">
    <link rel="stylesheet" th:href="@{/css/jquery.fancybox.min.css}">
    <link rel="stylesheet" th:href="@{/css/bootstrap-select.min.css}">
    <link rel="stylesheet" th:href="@{/fonts/icomoon/style.css}">
    <link rel="stylesheet" th:href="@{/fonts/line-icons/style.css}">
    <link rel="stylesheet" th:href="@{/css/owl.carousel.min.css}">
    <link rel="stylesheet" th:href="@{/css/animate.min.css}">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" th:href="@{/css/footer.css}">

    <style>
        .foot {
            color: #ddd;
            padding: 50px 0 20px;
            background-color: black;
        }

        footer h4 {
            color: #fff;
            margin-bottom: 20px;
            font-size: 18px;
        }

        footer ul {
            list-style: none;
            padding: 0;
        }

        footer ul li {
            margin-bottom: 10px;
        }

        footer ul li a {
            color: #bbb;
            text-decoration: none;
            transition: 0.3s;
        }

        footer ul li a:hover {
            color: #fff;
        }

        .copy-right {
            border-top: 1px solid #444;
            text-align: center;
            margin-top: 30px;
            padding-top: 15px;
            font-size: 14px;
            color: #aaa;
        }

        /* Job Listing Styles */
        .job-listing {
            border: 1px solid #e9ecef;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .job-listing:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            border-color: #89ba16;
        }

        .job-listing .card-body {
            padding: 1.5rem;
        }

        .job-listing-logo img,
        .company-logo-placeholder {
            border: 2px solid #e9ecef;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .job-listing:hover .job-listing-logo img,
        .job-listing:hover .company-logo-placeholder {
            border-color: #89ba16;
            transform: scale(1.05);
        }

        .job-listing h5 {
            color: #333;
            font-weight: 600;
            line-height: 1.3;
        }

        .job-listing .text-primary {
            color: #89ba16 !important;
        }

        .badge-success {
            background-color: #89ba16 !important;
        }

        .badge-danger {
            background-color: #dc3545 !important;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .col-md-6 {
                margin-bottom: 1rem !important;
            }
            
            .job-listing .card-body {
                padding: 1rem;
            }
            
            .job-listing-logo {
                margin-right: 0.75rem !important;
            }
            
            .job-listing-logo,
            .company-logo-placeholder {
                width: 60px !important;
                height: 60px !important;
            }

            footer h4 {
                margin-top: 20px;
            }

            .copy-right {
                font-size: 12px;
            }
        }
    </style>
</head>

<body id="top">
    <!-- Rest of your HTML content remains the same -->
    <div id="overlayer"></div>
    <div class="loader">
        <div class="spinner-border text-primary" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>

    <div class="site-wrap">
        <!-- Show header when logged in -->
        <div th:replace="headerLogin :: profile-header"></div>

        <!-- Guest header -->
        <div class="site-mobile-menu site-navbar-target">
            <div class="site-mobile-menu-header">
                <div class="site-mobile-menu-close mt-3">
                    <span class="icon-close2 js-menu-toggle"></span>
                </div>
            </div>
            <div class="site-mobile-menu-body"></div>
        </div>

        <!-- NAVBAR -->

        <!-- HOME -->
        <section class="home-section section-hero overlay bg-image"
            th:style="'background-image: url(' + @{/images/hero_1.jpg} + ');'" id="home-section">
            <div class="container">
                <div class="row align-items-center justify-content-center">
                    <div class="col-md-12">
                        <div class="mb-5 text-center">
                            <h1 class="text-white fw-bold">Find the Fastest Path to Your Dream Job</h1>
                            <p class="text-light">
                                Discover thousands of opportunities, connect with top companies, and take the next step
                                in your career with ease.
                            </p>
                        </div>
                        <form method="post" class="search-jobs-form">
                            <div class="row mb-5">
                                <div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
                                    <input type="text" class="form-control form-control-lg"
                                        placeholder="Job title, Company...">
                                </div>
                                <div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
                                    <select class="selectpicker" data-style="btn-white btn-lg" data-width="100%"
                                        data-live-search="true" title="Select Region">
                                        <option>Anywhere</option>
                                        <option>San Francisco</option>
                                        <option>Palo Alto</option>
                                        <option>New York</option>
                                        <option>Manhattan</option>
                                        <option>Ontario</option>
                                        <option>Toronto</option>
                                        <option>Kansas</option>
                                        <option>Mountain View</option>
                                    </select>
                                </div>
                                <div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
                                    <select class="selectpicker" data-style="btn-white btn-lg" data-width="100%"
                                        data-live-search="true" title="Select Job Type">
                                        <option>Part Time</option>
                                        <option>Full Time</option>
                                    </select>
                                </div>
                                <div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
                                    <button type="submit"
                                        class="btn btn-primary btn-lg btn-block text-white btn-search"><span
                                            class="icon-search icon mr-2"></span>Search Job</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <a href="#next" class="scroll-button smoothscroll">
                <span class="icon-keyboard_arrow_down"></span>
            </a>
        </section>
        
        <!-- Show Jobs -->
        <section class="site-section">
            <div class="container">
                <div class="row mb-5 justify-content-center">
                    <div class="col-md-7 text-center">
                        <h2 class="section-title mb-2" th:text="${totalJobs} + ' Active Jobs Available'">Active Jobs Available</h2>
                        <p class="lead">Discover your next career opportunity from top companies</p>
                    </div>
                </div>
                
                <!-- Active Jobs Listings -->
				<div class="row mb-5" th:if="${not #lists.isEmpty(activeJobs)}">
				    <div class="col-md-6 mb-4" th:each="job : ${activeJobs}">
				        <a th:href="@{/user/job/detail/} + ${job.id}" class="text-decoration-none">
				            <div class="job-listing card h-100 shadow-sm">
				                <div class="card-body d-flex">
				                    <!-- Company Logo -->
				                    <div class="job-listing-logo me-3">
				                        <div th:if="${job.profilePhoto != null}" 
				                             style="width: 80px; height: 80px; border-radius: 8px; overflow: hidden; display: flex; align-items: center; justify-content: center;">
				                            <img th:src="'data:image/jpeg;base64,' + ${job.profilePhoto}" 
				                                 alt="Company Logo" 
				                                 style="width: 100%; height: 100%; object-fit: cover;">
				                        </div>
				                        <div th:unless="${job.profilePhoto != null}"
				                             class="company-logo-placeholder"
				                             style="width: 80px; height: 80px; background: #f8f9fa; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
				                            <i class="fas fa-building text-primary" style="font-size: 24px;"></i>
				                        </div>
				                    </div>
				
				                    <!-- Job Details -->
				                    <div class="job-listing-details flex-grow-1">
				                        <div class="job-listing-position mb-2">
				                            <h5 class="mb-1" th:text="${job.jobTitle}">Job Title</h5>
				                            <strong class="text-primary" th:text="${job.companyName}">Company Name</strong>
				                            <div class="mt-1" th:if="${job.ownerCompanyName != null}">
				                                <small class="text-muted">
				                                    <i class="bi bi-building"></i>
				                                    <span th:text="${job.ownerCompanyName}">Owner Company</span>
				                                </small>
				                            </div>
				                        </div>
				                        
				                        <div class="job-listing-info">
				                            <div class="job-listing-location mb-2">
				                                <span class="icon-room text-muted me-1"></span> 
				                                <small th:text="${job.location}">Location</small>
				                            </div>
				                            
				                            <div class="job-listing-meta">
				                                <span th:classappend="${job.jobType == 'Full Time'} ? 
				                                      'badge badge-success' : 'badge badge-danger'"
				                                      class="badge"
				                                      th:text="${job.jobType}">Job Type</span>
				                            </div>
				                        </div>
				                    </div>
				                </div>
				                
				                <!-- Optional: Add hover effect -->
				                <div class="card-footer bg-transparent border-0 pt-0">
				                    <small class="text-muted">
				                        <i class="far fa-clock me-1"></i>
				                        <span th:text="${#dates.format(job.createdAt, 'MMM dd, yyyy')}">Posted date</span>
				                    </small>
				                </div>
				            </div>
				        </a>
				    </div>
				</div>
        
                <div th:if="${#lists.isEmpty(activeJobs)}" class="text-center py-5">
                    <i class="fas fa-briefcase fa-3x text-muted mb-3"></i>
                    <h4 class="text-muted">No Active Jobs Available</h4>
                    <p class="text-muted">Check back later for new job opportunities.</p>
                </div>
        
                <!-- Pagination -->
                <div class="row pagination-wrap">
                    <div class="col-md-6 text-center text-md-left mb-4 mb-md-0">
                        <span>
                            Page <span th:text="${currentPage}">1</span> of <span th:text="${totalPages}">1</span>
                            - Showing <span th:text="${#lists.size(activeJobs)}">0</span> of <span th:text="${totalJobs}">0</span> jobs
                        </span>
                    </div>
                    <div class="col-md-6 text-center text-md-right">
                        <div class="custom-pagination ml-auto">
                            <!-- Previous Button -->
                            <a th:if="${hasPrev}" 
                               th:href="@{/home(page=${currentPage - 1})}" 
                               class="prev">
                               <i class="fas fa-chevron-left"></i> Previous
                            </a>
                            
                            <!-- Next Button -->
                            <a th:if="${hasNext}" 
                               th:href="@{/home(page=${currentPage + 1})}" 
                               class="next">
                               Next <i class="fas fa-chevron-right"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- FOOTER -->
        <div th:replace="footer :: site-footer"></div>
    </div>

    <!-- SCRIPTS -->
    <script th:src="@{/js/jquery.min.js}"></script>
    <script th:src="@{/js/isotope.pkgd.min.js}"></script>
    <script th:src="@{/js/stickyfill.min.js}"></script>
    <script th:src="@{/js/jquery.fancybox.min.js}"></script>
    <script th:src="@{/js/jquery.easing.1.3.js}"></script>
    <script th:src="@{/js/jquery.waypoints.min.js}"></script>
    <script th:src="@{/js/jquery.animateNumber.min.js}"></script>
    <script th:src="@{/js/owl.carousel.min.js}"></script>
    <script th:src="@{/js/bootstrap-select.min.js}"></script>
    <script th:src="@{/js/custom.js}"></script>
</body>
</html>